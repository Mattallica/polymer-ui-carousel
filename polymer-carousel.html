<!--
Copyright 2014 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @module Polymer Elements
 */
/**
 * The `polymer-carousel` element provides a method of constructing a 
 * a UI where a user can browse through a set of items and possibly 
 * select one of them.
 * 
 * @class polymer-carousel
 * @extends polymer-ui-animated-pages
 */
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer-flex-layout/polymer-flex-layout.html">
<link rel="import" href="../polymer-ui-animated-pages/polymer-ui-animated-pages.html">
<link rel="import" href="../polymer-animation/polymer-animation.html">
<polymer-element name="polymer-carousel" extends="polymer-ui-animated-pages" attributes="page">
  <template>
    <link rel="stylesheet" href="polymer-carousel.css">
    
     <polymer-flex-layout vertical></polymer-flex-layout>
      <polymer-ui-animated-pages id="pages" flex selected="{{page}}">
        <content></content>
      </polymer-ui-animated-pages>
     
      <div class="controls" 
        <div class="center"> 
          <div id="prev" on-click="{{previousItem}}" class="btn btn-prev {{ {disabled: page == '0'} | tokenList }}"></div>
          <div id="next" on-click="{{nextItem}}" class="btn btn-next {{ {disabled: page == itemCount-1} | tokenList }}"></div>
          <div class="caption"></div> 
          <div class="extra-controls"> 
            <span class="slide-count">
              <!--
              <span class="current-slide">{{selectedItem}}</span> of {{itemCount}} slides</span>-->
              <a name="grid" class="btn btn-grid"></a> 
              <a class="btn btn-fullscreen" name="fullscreen"></a> 
            </div> 
            <div class="description"></div> 
          </div> 
        </div>

  </template>
  <script>
    Polymer('polymer-carousel', {
      page: 0,
      selectedItem: 1,
      ready: function (){
        this.itemCount = this.$.pages.items.length;
      },
      previousItem: function(){
        if(this.page == 0){ return; }
        this.selectedItem = this.$.pages.selectedIndex;
        this.page = (this.selectedItem - 1) % this.itemCount;
      },
      nextItem: function(){
        if(this.page == this.itemCount - 1){ return; }
        this.selectedItem = this.$.pages.selectedIndex;
        this.page = (this.selectedItem + 1) % this.itemCount;
      }
    });
</script>
</polymer-element>